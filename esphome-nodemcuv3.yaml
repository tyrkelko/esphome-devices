esphome:
  name: esp-bedroom-ir
  platform: ESP8266
  board: nodemcuv2

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  manual_ip:
    static_ip: 10.100.102.54
    gateway: 10.100.102.1
    subnet: 255.255.255.0
    
  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Esphome-Nodemcuv3"
    password: !secret esp-bedroom-ir-ap-password

captive_portal:

# Enable logging
logger:

# Enable Home Assistant API
api:

ota:

#IR Receiver
remote_receiver:
  id: bedroom_ir_receiver
  pin:
    number: D2
    inverted: true
    mode: INPUT_PULLUP
  dump: raw
  filter: 10us

remote_transmitter:
  pin: D1
  carrier_duty_percent: 50%

climate:
  - platform: coolix
    name: "Bedroom A/C"
    sensor: temperature_sensor_bedroom_tv
    receiver_id: bedroom_ir_receiver
# Individual switches
switch:
  - platform: template
    name: "Electra A/C LED"
    turn_on_action:
      - remote_transmitter.transmit_raw:
          code: [ 4407, -4375, 538, -1600, 538, -556, 539, -1601, 536, -1600, 538, -557, 538, -1601, 538, -558, 537, -1600, 538, -556, 538, -1600, 538, -557, 538, -557, 538, -1599, 539, -556, 538, -1601, 539, -556, 537, -1601, 539, -1600, 537, -1600, 538, 
                  -1600, 546, -550, 539, -1599, 538, -558, 538, -1601, 538, -556, 538, -555, 539, -556, 539, -557, 539, -1599, 536, -559, 538, -1600, 538, -556, 539, -1599, 539, -556, 538, -1601, 538, -556, 539, -556, 539, -1600, 539, -555, 539, -1599, 538, -559, 537, 
                  -1600, 539, -556, 538, -1599, 538, -1601, 538, -556, 539, -1599, 539, -556, 539, -5208, 4380, -4367, 539, -1597, 539, -557, 538, -1599, 539, -1600, 538, -556, 538, -1601, 539, -555, 539, -1600, 538, -559, 536, -1601, 539, -555, 538, -558, 539, -1599, 
                  538, -555, 539, -1599, 539, -557, 538, -1601, 538, -1600, 537, -1600, 539, -1600, 537, -556, 538, -1599, 540, -556, 538, -1599, 539, -557, 538, -557, 538, -556, 539, -555, 539, -1600, 538, -557, 539, -1598, 539, -557, 537, -1601, 536, -559, 537, -1600, 
                  538, -557, 539, -555, 538, -1599, 539, -558, 538, -1598, 540, -555, 539, -1599, 538, -557, 539, -1598, 538, -1601, 538, -557, 539, -1599, 539, -556, 539]
          carrier_frequency: 38kHz
  - platform: template
    name: "Electra A/C 25 Cold"
    turn_on_action:
      - remote_transmitter.transmit_raw:
          code: [ 4432, -4371, 541, -1598, 538, -556, 541, -1595, 542, -1597, 540, -554, 542, -553, 540, -1596, 543, -553, 541, -554, 541, -1596, 541, -554, 541, -553, 542, -1599, 540, -1597, 540, -553, 541, -1596, 541, -1597, 541, -554, 541, -553, 541, 
                  -1597, 541, -1597, 541, -1595, 541, -1597, 540, -1598, 542, -552, 542, -1596, 541, -1596, 541, -553, 541, -554, 541, -553, 539, -556, 541, -553, 540, -1597, 541, -1596, 541, -554, 541, -553, 539, -557, 541, -554, 541, -552, 540, -555, 540, -555, 541, 
                  -555, 542, -1594, 542, -1596, 540, -1598, 540, -1596, 542, -1595, 542, -1595, 541, -5206, 4382, -4365, 541, -1594, 542, -555, 541, -1596, 541, -1595, 542, -553, 542, -553, 541, -1597, 541, -553, 543, -552, 541, -1597, 541, -554, 541, -554, 541, -1597, 
                  541, -1595, 541, -554, 542, -1596, 541, -1596, 542, -554, 542, -553, 542, -1597, 540, -1597, 541, -1596, 542, -1596, 542, -1597, 540, -554, 541, -1597, 542, -1596, 542, -554, 541, -553, 542, -552, 541, -552, 542, -555, 541, -1595, 547, -1591, 541, 
                  -555, 540, -554, 542, -553, 541, -552, 542, -554, 541, -553, 540, -554, 542, -553, 541, -1597, 541, -1596, 540, -1596, 541, -1597, 542, -1601, 537, -1595, 541]
          carrier_frequency: 38kHz    
  - platform: template
    name: "Electra A/C Off"
    turn_on_action:
      - remote_transmitter.transmit_raw:
          code: [ 4410, -4372, 569, -1568, 569, -526, 567, -1569, 569, -1570, 569, -527, 568, -526, 542, -1595, 569, -527, 567, -526, 569, -1569, 569, -525, 569, -525, 568, -1571, 567, -1570, 569, -525, 569, -1569, 568, -526, 568, -1569, 569, -1567, 569, 
                  -1568, 569, -1569, 569, -525, 542, -1596, 569, -1568, 569, -1569, 568, -527, 568, -527, 542, -552, 568, -525, 569, -1569, 569, -526, 568, -525, 570, -1567, 542, -1596, 568, -1569, 542, -551, 567, -528, 542, -552, 569, -526, 569, -525, 569, -525, 544, 
                  -552, 542, -552, 568, -1568, 569, -1569, 569, -1567, 568, -1569, 569, -1568, 569, -5177, 4411, -4336, 570, -1567, 569, -527, 568, -1569, 569, -1569, 569, -527, 568, -525, 569, -1570, 568, -526, 568, -526, 568, -1569, 570, -525, 570, -525, 569, -1568, 
                  570, -1567, 570, -525, 571, -1566, 571, -523, 571, -1566, 572, -1566, 572, -1565, 571, -1565, 572, -523, 571, -1567, 572, -1565, 572, -1567, 572, -522, 571, -522, 572, -525, 570, -524, 570, -1567, 571, -525, 570, -525, 570, -1566, 571, -1567, 571, 
                  -1568, 570, -524, 572, -523, 571, -524, 570, -526, 569, -524, 570, -524, 569, -526, 568, -527, 568, -1569, 569, -1567, 569, -1569, 569, -1568, 542, -1596, 569]
          carrier_frequency: 38kHz  
  - platform: template
    name: "PILOT TV On/Off"
    turn_on_action:
      - remote_transmitter.transmit_raw:
          code: [ 9064, -4478, 590, -519, 616, -520, 557, -578, 588, -521, 614, -519, 559, -577, 589, -1655, 558, -576, 590, -1654, 558, -1687, 615, -1655, 587, -1655, 559, -1687, 591, -1677, 590, -519, 617, -1652, 591, -520, 615, -1654, 589, -521, 615, 
                  -519, 558, -1685, 617, -518, 559, -576, 589, -521, 615, -1653, 591, -520, 615, -1653, 591, -1653, 559, -577, 589, -1654, 559, -1685, 615, -1655, 588]
          carrier_frequency: 50kHz
      - remote_transmitter.transmit_raw:
          code: [9064, -2209, 615]
          carrier_frequency: 50kHz
  - platform: template
    name: "Living Room AC 24c cool fan 2/3"
    turn_on_action:
      - remote_transmitter.transmit_raw:
          code: [8443, -3527, 502, -1715, 503, -551, 504, -1685, 532, -1660, 528, -553, 501, -582, 527, -1689, 501, -1690, 474, -608, 500, -579, 503, -1663, 502, -1685, 531, -553, 529, -1685, 503, -580, 477, -1686, 505, -1713, 502, -554, 527, -1661, 320, 
                  -900, 365, -1713, 503, -1662, 529, -1661, 529, -578, 501, -581, 499, -583, 503, -552, 529, -1662, 530, -552, 500, -608, 502, -1688, 530, -482, 528]
          carrier_frequency: 55kHz
      - remote_transmitter.transmit_raw:
          code: [8445, -3524, 532, -551, 529, -1715, 448, -581, 557, -524, 530, -1636, 552, -1661, 531, -580, 500, -529, 557, -1655, 505, -1688, 530, -551, 529, -552, 536, -1655, 530, -576, 504, -1637, 582, -527, 528, -553, 527, -1663, 502, -579, 528, 
                  -1688, 531, -554, 499, -553, 528, -528, 528, -1689, 529, -1659, 529, -1662, 529, -1660, 527, -580, 480, -1686, 529, -1687, 477, -579, 528, -1617, 530]
          carrier_frequency: 55kHz
      - remote_transmitter.transmit_raw:
          code: [8474, -3499, 528, -1661, 503, -579, 529, -1637, 555, -1660, 527, -581, 502, -555, 528, -1660, 529, -1661, 528, -556, 527, -551, 531, -1663, 500, -1715, 501, -580, 476, -1688, 529, -552, 528, -1690, 503, -1660, 529, -552, 529, -1635, 556, 
                  -551, 529, -1663, 528, -1660, 531, -1661, 529, -553, 529, -578, 477, -577, 531, -555, 475, -1713, 529, -550, 505, -580, 500, -1692, 528, -507, 531]
          carrier_frequency: 55kHz
  - platform: template
    name: "Living Room AC Off"
    turn_on_action:
      - remote_transmitter.transmit_raw:
          code: [8364, -3684, 371, -1660, 451, -662, 473, -1716, 367, -1820, 503, -636, 320, -2973, 394, -1747, 421, -580, 472, -661, 475, -1848, 370, -1716, 528, -528, 366, -1846, 473, -798, 290, -1872, 314, -1661, 529, -1666, 527, -629, 453, -1794, 395, 
                  -3877, 449, -2087, 118, -671, 319, -816, 370, -608, 501, -634, 420, -1945, 217, -633, 477, -578, 480, -1764, 448, -592, 447]
          carrier_frequency: 55kHz
      - remote_transmitter.transmit_raw:
          code: [8420, -3501, 531, -629, 421, -1716, 527, -755, 225, -735, 424, -1690, 500, -1743, 395, -684, 450, -659, 447, -1637, 502, -1691, 498, -690, 419, -828, 197, -1772, 476, -686, 367, -1742, 371, -713, 500, -582, 318, -4246, 290, -607, 474, 
                  -1835, 188, -1964, 289, -1766, 501, -1690, 476, -1659, 554, -583, 342, -1926, 291, -1900, 315, -849, 287, -1698, 497]
          carrier_frequency: 55kHz
      - remote_transmitter.transmit_raw:
          code: [8421, -3576, 475, -1663, 529, -607, 422, -1795, 450, -1827, 256, -660, 523, -636, 474, -1610, 582, -1686, 397, -688, 342, -769, 419, -1739, 448, -1715, 520, -619, 315, -1848, 501, -553, 475, -1740, 477, -1685, 477, -1741, 396, -687, 476, 
                  -1715, 446, -1743, 475, -1714, 529, -1611, 473, -608, 474, -818, 292, -605, 504, -655, 320, -1873, 422, -578, 477, -610, 444, -1741, 530, -483, 556]
          carrier_frequency: 55kHz
  - platform: gpio
    name: "led"
    pin: 
      number: D4
      inverted: true
          

sensor:
  - platform: dht
    pin: D0
    temperature:
      name: "Temperature Bedroom TV"
      id: temperature_sensor_bedroom_tv
      filters:
        - lambda: return x -2;
    humidity:
      name: "Humidity Bedroom TV"
      id: humidity_sensor_bedroom_tv
      filters:
        - lambda: return x - 5;

binary_sensor:
  - platform: gpio
    pin: D5
    name: "Bedroom PIR"
    id: bedroom_pir
    device_class: motion